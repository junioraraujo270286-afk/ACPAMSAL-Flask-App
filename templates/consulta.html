{% extends 'base.html' %}
{% block content %}
<div class="row justify-content-center">
    <div class="col-md-6">
        <div class="card">
            <div class="card-header text-center text-uppercase">
                Consulta de Associado
            </div>
            <div class="card-body bg-white">
                <form action="{{ url_for('consulta') }}" method="GET">
                    <div class="input-group">
                        <input type="text" name="q" class="form-control" placeholder="PLACA ou MATRÍCULA" value="{{ query }}" required>
                        <button class="btn btn-dark fw-bold text-warning" type="submit">BUSCAR</button>
                    </div>
                </form>

                {% if aviso_desligado %}
                    <div class="alert alert-danger mt-4 p-4 border-start border-5 border-danger">
                        <h4 class="text-center fw-bold"><i class="fas fa-gavel"></i> AVISO IMPORTANTE</h4>
                        <p class="text-center fw-bold text-uppercase mb-1">Associado desligado da associação</p>
                        <p class="text-center mb-3">Aguardando a entrega dos uniformes.</p>
                        <hr>
                        <p class="small text-muted mb-0">
                            <strong>Apropriação Indébita (Art. 168 CP):</strong> Sujeito a processos criminais e cíveis.
                        </p>
                    </div>
                {% elif s %}
                    <div class="text-center mt-4">
                        <img src="{{ url_for('static', filename='uploads/' + s.foto) }}" class="rounded border border-dark mb-3" width="140" style="box-shadow: 0 4px 8px rgba(0,0,0,0.2);">
                        <h4 class="fw-bold text-dark">{{ s.nome.upper() }}</h4>
                        <span class="badge bg-success mb-3">SITUAÇÃO: ATIVO</span>
                        <table class="table table-sm text-start mt-2">
                            <tr><th width="40%">MATRÍCULA:</th><td>{{ s.matricula }}</td></tr>
                            <tr><th>PLACA:</th><td>{{ s.placa }}</td></tr>
                            <tr><th>PONTO:</th><td>{{ s.ponto_trabalho }}</td></tr>
                            <tr><th>VEÍCULO:</th><td>{{ s.modelo }} ({{ s.cor }})</td></tr>
                        </table>
                    </div>
                {% elif query %}
                    <div class="alert alert-light mt-4 text-center border">Registro não encontrado.</div>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}
