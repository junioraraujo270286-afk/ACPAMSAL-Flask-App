{% extends "base.html" %}
{% block title %}Editar Associado{% endblock %}
{% block content %}
<h2>✏️ Editar Associado: {{ associado.nome }}</h2>
<hr>
<form method="POST" action="{{ url_for('editar_associado', id=associado.id) }}" enctype="multipart/form-data">
    <div class="row mb-3">
        <div class="col-md-4">
            <label for="matricula" class="form-label">Matrícula</label>
            <input type="text" class="form-control" value="{{ associado.matricula }}" disabled>
        </div>
        <div class="col-md-8">
            <label for="nome" class="form-label">Nome Completo</label>
            <input type="text" class="form-control" id="nome" name="nome" required value="{{ associado.nome }}">
        </div>
    </div>
    <div class="row mb-3">
        <div class="col-md-6"><label for="cpf" class="form-label">CPF</label><input type="text" class="form-control" id="cpf" name="cpf" value="{{ associado.cpf }}"></div>
        <div class="col-md-6"><label for="rg" class="form-label">RG</label><input type="text" class="form-control" id="rg" name="rg" value="{{ associado.rg }}"></div>
    </div>
    
    <h4>Foto e Endereço</h4>
    <div class="row mb-3">
        <div class="col-md-4">
            <label for="foto" class="form-label">Foto Atual</label>
            {% if associado.foto_base64 %}
                <img src="{{ associado.foto_base64 }}" alt="Foto do Associado" style="width: 100%; max-height: 200px; object-fit: cover; margin-bottom: 10px; border: 1px solid #ccc;">
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="remover_foto" id="remover_foto">
                    <label class="form-check-label" for="remover_foto">Remover foto atual</label>
                </div>
            {% else %}
                <p>Nenhuma foto cadastrada.</p>
            {% endif %}
            
            <label for="foto" class="form-label mt-3">Nova Foto (Substituir/Adicionar)</label>
            <input type="file" class="form-control" id="foto" name="foto" accept="image/*">
        </div>

        <div class="col-md-8">
             <div class="row">
                <div class="col-md-6"><label for="rua" class="form-label">Rua</label><input type="text" class="form-control" id="rua" name="rua" value="{{ associado.rua }}"></div>
                <div class="col-md-2"><label for="numero" class="form-label">Número</label><input type="text" class="form-control" id="numero" name="numero" value="{{ associado.numero }}"></div>
                <div class="col-md-4"><label for="bairro" class="form-label">Bairro</label><input type="text" class="form-control" id="bairro" name="bairro" value="{{ associado.bairro }}"></div>
            </div>
        </div>
    </div>
    
    <h4>Dados do Veículo</h4>
    <div class="row mb-3">
        <div class="col-md-3"><label for="placa" class="form-label">Placa</label><input type="text" class="form-control" id="placa" name="placa" value="{{ associado.placa }}"></div>
        <div class="col-md-3"><label for="cor" class="form-label">Cor</label><input type="text" class="form-control" id="cor" name="cor" value="{{ associado.cor }}"></div>
        <div class="col-md-3"><label for="ano" class="form-label">Ano</label><input type="number" class="form-control" id="ano" name="ano" value="{{ associado.ano }}"></div>
        <div class="col-md-3"><label for="renavam" class="form-label">Renavam</label><input type="text" class="form-control" id="renavam" name="renavam" value="{{ associado.renavam }}"></div>
    </div>
    
    <button type="submit" class="btn btn-primary">Salvar Alterações</button>
    <a href="{{ url_for('gerenciar_associados_web') }}" class="btn btn-secondary">Cancelar</a>
</form>
{% endblock %}
