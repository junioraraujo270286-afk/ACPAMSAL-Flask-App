{% extends "base.html" %}
{% block content %}
<div class="row">
    <div class="col-md-4 mb-4">
        <div class="card border-0 shadow-sm text-center p-4" style="border-radius: 15px;">
            <div class="mb-3">
                <img src="{{ url_for('static', filename='uploads/' + socio.foto) }}" 
                     class="rounded-circle border border-4 border-warning shadow" 
                     width="160" height="160" style="object-fit: cover;">
            </div>
            <h4 class="fw-bold">{{ socio.nome.split()[0] }} {{ socio.nome.split()[-1] }}</h4>
            <p class="badge bg-dark">SÓCIO MATRÍCULA: {{ socio.matricula }}</p>
            
            <div class="d-grid gap-2 mt-3">
                <a href="{{ url_for('gerar_cracha', id=socio.id) }}" target="_blank" class="btn btn-warning fw-bold py-2">
                    <i class="bi bi-qr-code"></i> MEU CRACHÁ DIGITAL (PDF)
                </a>
            </div>
            <hr>
            <div class="text-start">
                <h6 class="fw-bold">Situação Financeira:</h6>
                {% if socio.status_financeiro == 'ATIVO' %}
                    <div class="alert alert-success p-2 mb-0"><i class="bi bi-check-circle"></i> REGULARIZADO</div>
                {% else %}
                    <div class="alert alert-danger p-2 mb-0"><i class="bi bi-exclamation-triangle"></i> PENDÊNCIAS EM ABERTO</div>
                {% endif %}
            </div>
        </div>
    </div>

    <div class="col-md-8">
        <div class="card border-0 shadow-sm mb-4" style="border-radius: 15px;">
            <div class="card-header bg-dark text-warning fw-bold">DADOS DO MEU VEÍCULO</div>
            <div class="card-body">
                <div class="row">
                    <div class="col-6 mb-2"><b>Placa:</b> {{ socio.placa }}</div>
                    <div class="col-6 mb-2"><b>Modelo:</b> {{ socio.modelo }}</div>
                    <div class="col-6 mb-2"><b>Ano:</b> {{ socio.ano }}</div>
                    <div class="col-6 mb-2"><b>Renavam:</b> {{ socio.renavam }}</div>
                    <div class="col-12"><b>Ponto de Trabalho:</b> {{ socio.ponto_nome }} ({{ socio.ponto_bairro }})</div>
                </div>
            </div>
        </div>

        <div class="card border-0 shadow-sm" style="border-radius: 15px;">
            <div class="card-header bg-secondary text-white fw-bold">MINHAS MENSALIDADES - CICLO 2026</div>
            <div class="list-group list-group-flush">
                {% for m in socio.mensalidades %}
                <div class="list-group-item d-flex justify-content-between align-items-center py-3">
                    <div>
                        <span class="fw-bold">{{ m.mes_referencia }}</span><br>
                        <small class="text-muted">Valor: R$ {{ "%.2f"|format(m.valor) }}</small>
                    </div>
                    {% if m.pago %}
                        <span class="badge bg-success">PAGO EM {{ m.data_pagamento.strftime('%d/%m/%y') }}</span>
                    {% else %}
                        <span class="badge bg-danger">PENDENTE</span>
                    {% endif %}
                </div>
                {% else %}
                <div class="p-5 text-center text-muted">Ainda não foram lançadas mensalidades para 2026.</div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>
{% endblock %}
