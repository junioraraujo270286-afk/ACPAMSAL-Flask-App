{% extends "base.html" %}
{% block title %}Configurações - Admin{% endblock %}
{% block content %}

<h2 class="text-secondary">⚙️ Configurações da Associação</h2>
<p class="text-muted">Gerencie a identidade visual e os parâmetros financeiros.</p>
<hr>

<form method="POST" action="{{ url_for('config_web') }}" enctype="multipart/form-data">

    <div class="card shadow mb-4">
        <div class="card-header bg-dark text-white">
            <h5 class="mb-0">Identidade e Contato</h5>
        </div>
        <div class="card-body">
            
            <div class="row">
                <div class="col-md-6">
                    <div class="mb-3">
                        <label for="nome_assoc" class="form-label">Nome Completo da Associação</label>
                        <textarea class="form-control" id="nome_assoc" name="nome_assoc" rows="2" required>{{ config.nome_assoc }}</textarea>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="mb-3">
                        <label for="cnpj" class="form-label">CNPJ</label>
                        <input type="text" class="form-control" id="cnpj" name="cnpj" value="{{ config.cnpj }}" required>
                    </div>
                </div>
            </div>

            <div class="mb-3">
                <label for="endereco" class="form-label">Endereço Completo</label>
                <textarea class="form-control" id="endereco" name="endereco" rows="2" required>{{ config.endereco }}</textarea>
            </div>
            
            <div class="row">
                <div class="col-md-6">
                    <div class="mb-3">
                        <label for="telefone" class="form-label">Telefone (Whatsapp)</label>
                        <input type="text" class="form-control" id="telefone" name="telefone" value="{{ config.telefone }}" required>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="mb-3">
                        <label for="email" class="form-label">E-mail de Contato</label>
                        <input type="email" class="form-control" id="email" name="email" value="{{ config.email }}" required>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="card shadow mb-4">
        <div class="card-header bg-dark text-white">
            <h5 class="mb-0">Parâmetros Financeiros</h5>
        </div>
        <div class="card-body">
            <div class="mb-3">
                <label for="mensalidade_valor" class="form-label">Valor Padrão da Mensalidade (R$)</label>
                <input type="number" step="0.01" class="form-control" id="mensalidade_valor" name="mensalidade_valor" value="{{ config.mensalidade_valor }}" required>
            </div>
        </div>
    </div>

    <div class="card shadow mb-4">
        <div class="card-header bg-dark text-white">
            <h5 class="mb-0">Logos e Imagens</h5>
        </div>
        <div class="card-body">
            
            <div class="row">
                <div class="col-md-6 border-end">
                    <h6 class="text-primary">Logo da Associação (Cabeçalho)</h6>
                    {% if config.logo_url %}
                        <img src="{{ config.logo_url }}" alt="Logo Atual" style="height: 60px;" class="mb-2 rounded-circle border p-1">
                        <button type="submit" name="remover_logo" class="btn btn-sm btn-outline-danger d-block mb-3"><i class="fas fa-trash"></i> Remover Logo</button>
                    {% else %}
                        <p class="text-muted small">Nenhuma logo definida.</p>
                    {% endif %}
                    <div class="mb-3">
                        <label for="logo_upload" class="form-label small">Selecione nova logo (PNG ou JPG)</label>
                        <input class="form-control form-control-sm" id="logo_upload" name="logo_upload" type="file" accept="image/*">
                    </div>
                </div>
                
                <div class="col-md-6">
                    <h6 class="text-primary">Imagem de Fundo do Login</h6>
                    {% if config.login_bg_url %}
                        <img src="{{ config.login_bg_url }}" alt="Fundo de Login Atual" style="height: 60px; max-width: 100px; object-fit: cover;" class="mb-2 border p-1">
                        <button type="submit" name="remover_login_bg" class="btn btn-sm btn-outline-danger d-block mb-3"><i class="fas fa-trash"></i> Remover Fundo</button>
                    {% else %}
                        <p class="text-muted small">Nenhuma imagem de fundo definida.</p>
                    {% endif %}
                    <div class="mb-3">
                        <label for="login_bg_upload" class="form-label small">Selecione nova imagem (PNG ou JPG)</label>
                        <input class="form-control form-control-sm" id="login_bg_upload" name="login_bg_upload" type="file" accept="image/*">
                    </div>
                </div>
                
            </div>
            
        </div>
    </div>

    <div class="mb-5">
        <button type="submit" class="btn btn-success btn-lg w-100"><i class="fas fa-save"></i> Salvar Configurações</button>
    </div>
</form>

{% endblock %}
